{% load static %}
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="{% static 'dashboard/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'dashboard/css/animation.css' %}">
<!-- <link rel="stylesheet" href="{% static 'dashboard/css/buttons.css' %}"> -->
<!-- <script src="{% static 'dashboard/js/animation.js' %}"></script> -->
<!-- <script src="{% static 'dashboard/js/buttons.js' %}"></script> -->

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>

<body style=" background-size: 200% 100%;background-image: url({% static '/dashboard/bg5.jpg' %});">
    <!-- <div class="square parallax-one"></div>
    <div class="circle"></div>
    <h1 class="text move-text parallax-two">Welcome</h1> -->
    <!-- navbar -->
    <nav class="navbar fixed-top navbar-expand navbar-dark" style="background-color: #55779f;">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'dashboard' %}">
                <h3 class="my-heading" style="font-size: 15px;">ArkaShine Innovations Pvt Ltd</h3>
            </a>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'notifications' %}">Notifications</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'add-devise' %}">Add devise</a>
                    </li>
                     <li class="nav-item">
                        <a class="nav-link" href="{% url 'logout' %}">Logout</a>
                    </li>
                </ul>
        </div>
    </nav>
  <!-- end navbar -->   
        <!-- <div style="margin-top:100px;float: left;width: 100%;">
            <button class="rounded bg-dark text-white" id="dashboard-buttons" style="width: 50%;float: left;" onclick="window.location={% url 'device-list' %}">Devises</button>
            <button class="rounded bg-dark text-white" id="dashboard-buttons" style="width: 50%;float: left;" onclick="window.location={% url 'map' %}">Map</button>
            <button class="rounded bg-dark text-white" id="dashboard-buttons" style="width: 50%;float: left;" onclick="window.location={% url 'notifications' %}">Notifications</button>
            <button class="rounded bg-dark text-white" id="dashboard-buttons" style="width: 50%;float: left;" onclick="window.location={% url 'add-devise' %}">Add devise</button>
        </div> -->

        <!-- devise counts -->
        <div class="container" style="margin-top:100px;height: 500px;">

            <div class="card">
              <div class="face face1">
                <div class="content">
                  <span class="stars"></span>
                  <h2 class="java"><a href="{% url 'device-list' %}">Devises</h2>
                  <p class="java">Total devises currently in use : {{devise_counts}}.</p></a>
                </div>
              </div>
              <div class="face face2">
                <h4>Devises</h4>
              </div>
            </div>
          
            <div class="card">
              <div class="face face1">
                <div class="content">
                  <span class="stars"></span>
                  <h2 class="python"><a href="{% url 'add-devise' %}">Add devise</h2>
                  <p class="python">Click to add devise.</p></a>
                </div>
              </div>
              <div class="face face2">
                <h4>Add devise</h4>
              </div>
            </div>
          
            <div class="card">
              <div class="face face1">
                <div class="content">
                  <span class="stars"></span>
                  <h2 class="java"><a href="{% url 'map' %}">Map</h2>
                  <p class="java">Click to check devices locations.</p></a>
                </div>
              </div>
              <div class="face face2">
                <h4>Map</h4>
              </div>
            </div>
          
            <div class="card">
              <div class="face face1">
                <div class="content">
                  <span class="stars"></span>
                  <h2 class="cSharp"><a href="{% url 'notifications' %}"> Notifications</h2>
                  <p class="cSharp">Total notifications : {{notification_counts}}.</p></a>
                </div>
              </div>
              <div class="face face2">
                <h4>Notifications</h4>
              </div>
            </div>

            <div class="card">
                <div class="face face1">
                  <div class="content">
                    <span class="stars"></span>
                    <h2 class="cSharp">API calls</h2>
                    <p class="cSharp">Total API called till date : {{api_counts}}.</p>
                  </div>
                </div>
                <div class="face face2">
                  <h4>API calls</h4>
                </div>
              </div>

              <div class="card">
                <div class="face face1">
                  <div class="content">
                    <span class="stars"></span>
                    <h2 class="cSharp"><a href="{% url 'dynamic_fields' %}">Dynamic fields</h2>
                    <p class="cSharp">Total fields : {{dynamic_fields}}.</p></a>
                  </div>
                </div>
                <div class="face face2">
                  <h4>Dynamic fields</h4>
                </div>
              </div>
          </div>
        <!-- end devise counts -->

        <div class="row m-1">
            <div class="col d-flex justify-content-center">
                <form class="" style="width: 100%;"> 
                    <h4 >Select devise to view the API call counts</h4>
                    <select class="form-control select2" name="pk" style="width: 33%; float: left;">
                        <option value="">Selct devise</option>
                        {% for devise in devises %}
                            <option value="{{devise.pk}}">{{devise.name}}</option> 
                        {% endfor %}
                    </select>
                    <select class="form-control select2" name="year" style="width: 33%;float: left;">
                      <option value="">Select year</option>
                      {% for year in years %}
                          <option value="{{year}}">{{year}}</option> 
                      {% endfor %}
                  </select>
                  <select class="form-control select2" name="state" style="width: 33%;float: left;">
                    <option value="">Select state</option>
                    {% for state in states %}
                        <option value="{{state}}">{{state}}</option> 
                    {% endfor %}
                  </select>
                  <center>
                    <button class="btn btn-primary btn-sm btn-icon-text mt-1"  style="width: 300px;">Filter</button>
                  </center>
                </form>
            </div>
        </div>
    <!-- bar graph -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <center>
        <canvas class="" id="myChart" style="width:100%;max-width:700px;background-color: #ffffff7d;"></canvas>
    </center>

    <script>
        var xValues = [50,60,70,80,90,100,110,120,130,140,150];
        var yValues = [7,8,8,9,9,9,10,11,14,14,15];

        new Chart("myChart", {
        type: "line",
        data: {
            labels: xValues,
            datasets: [{
            fill: false,
            lineTension: 0,
            backgroundColor: "rgba(0,0,255,1.0)",
            borderColor: "rgba(0,0,255,0.1)",
            data: yValues
            }]
        },
        options: {
            legend: {display: false},
            scales: {
            yAxes: [{ticks: {min: 6, max:16}}],
            }
        }
        });
    </script> -->
    <!-- end bar graph -->


<script>
    window.onload = function () {
    
    var chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: true,  
        
        title:{
            text:{% if devise_name %} "Api counts for {{devise_name}}" {% else %}"Please select devise to get data" {% endif %}
        },
        axisY: {
            title: "API calls",
            // valueFormatString: "#0,,.",
            suffix: "",
            prefix: ""
        },
        data: [{
            // type: "line",
            type: "splineArea",
            color: "rgba(54,158,173,.7)",
            markerSize: 10,
            // xValueFormatString: "YYYY",
            // yValueFormatString: "$#,##0.##",
            dataPoints: [
                {% for data, count in chart_data %}
                    { x: new Date({{data}}), y: {{count}}, color:'red' },
                {% endfor %}
                // { x: new Date(2000, 1, 1), y: 3289000 },
                // { x: new Date(2001, 0), y: 3830000 },
                // { x: new Date(2002, 0), y: 2009000 },
                // { x: new Date(2003, 0), y: 2840000 },
                // { x: new Date(2004, 0), y: 2396000 },
                // { x: new Date(2005, 0), y: 1613000 },
                // { x: new Date(2006, 0), y: 2821000 },
                // { x: new Date(2007, 0), y: 2000000 },
                // { x: new Date(2008, 0), y: 1397000 },
                // { x: new Date(2009, 0), y: 2506000 },
                // { x: new Date(2010, 0), y: 2798000 },
                // { x: new Date(2011, 0), y: 3386000 },
                // { x: new Date(2012, 0), y: 6704000},
                // { x: new Date(2013, 0), y: 6026000 },
                // { x: new Date(2014, 0), y: 2394000 },
                // { x: new Date(2015, 0), y: 1872000 },
                // { x: new Date(2016, 0), y: 2140000 },
            ]
        }]
        });
    chart.render();
    
    }
    </script>
{% if devise_name %}
<div id="chartContainer" style="background-color: #ffffff7d;height: 300px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
{% endif %}
</body>


<style>

@import url("https://fonts.googleapis.com/css2?family=Righteous&display=swap");

body .container {
  max-width: 100vw;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  grid-gap: 35px;
  margin: 0 auto;
  padding: 40px 0;
}
body .container .card {
  position: relative;
  width: 210px;
  height: 210px;
  margin: 0 auto;
  background: #000;
  border-radius: 15px;
  box-shadow: 0 15px 60px rgba(0, 0, 0, 0.5);
}
body .container .card .face {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
body .container .card .face.face1 {
  box-sizing: border-box;
  padding: 20px;
}
body .container .card .face.face1 h2 {
  margin: 0;
  padding: 0;
}
body .container .card .face.face1 .java {
  background-color: #fffc00;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
body .container .card .face.face1 .python {
  background-color: #00fffc;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
body .container .card .face.face1 .cSharp {
  background-color: #fc00ff;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
body .container .card .face.face2 {
  transition: 0.5s;
}
body .container .card .face.face2 h4 {
  margin: 0;
  padding: 0;
  /* font-size: 10em; */
  color: #fff;
  transition: 0.5s;
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  z-index: 10;
}
body .container .card:hover .face.face2 {
  height: 60px;
}
body .container .card:hover .face.face2 h2 {
  font-size: 2em;
}
body .container .card:nth-child(1) .face.face2 {
  background-image: linear-gradient(40deg, #fffc00 0%, #fc00ff 45%, #00fffc 100%);
  border-radius: 15px;
}
body .container .card:nth-child(2) .face.face2 {
  background-image: linear-gradient(40deg, #fc00ff 0%, #00fffc 45%, #fffc00 100%);
  border-radius: 15px;
}
body .container .card:nth-child(3) .face.face2 {
  background-image: linear-gradient(40deg, #00fffc 0%, #fc00ff 45%, #fffc00 100%);
  border-radius: 15px;
}
body .container .card:nth-child(4) .face.face2 {
  background-image: linear-gradient(40deg, #00fffc 0%, #fc00ff 45%, #fffc00 100%);
  border-radius: 15px;
}
body .container .card:nth-child(5) .face.face2 {
  background-image: linear-gradient(40deg, #00fffc 0%, #fc00ff 45%, #fffc00 100%);
  border-radius: 15px;
}
body .container .card:nth-child(6) .face.face2 {
  background-image: linear-gradient(40deg, #00fffc 0%, #fc00ff 45%, #fffc00 100%);
  border-radius: 15px;
}

canvas {
  background-color: #ffffff7d;
}
</style>